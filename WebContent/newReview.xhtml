<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html [
    <!ENTITY nbsp "&#160;"> 
    <!ENTITY copy "&#169;">
    <!ENTITY euro "&#8364;"> 
]>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<c:set var="root" value="#{request.contextPath}" />

<h:head>
	<title>Insert a new review | Agave Shop - SIW 2015</title>
	
	<ui:include src="/WEB-INF/meta.xhtml" />
</h:head>

<body style="background: #f5f5f5">
	<f:view>
		<f:metadata>
			<f:viewParam name="id" value="#{productController.idProduct}" />
		</f:metadata>

		<script>
		//checks if page is inside iframe. If not performs a redirect
		if(window==window.top) {
			window.location.href = "#{root}";
		}
		</script>

		<h:panelGroup rendered="#{customerController.isLogged()}">

			<h:form enctype="multipart/form-data">
				<div class="col-sm-8" style="margin-bottom: 10px;">
					<h:inputText value="#{productController.comment}" required="true"
						requiredMessage="Review comment is mandatory" id="comment"
						styleClass="form-control needRequired needPlaceholder" />
					<h:message for="comment" styleClass="label label-warning" />
				</div>
				<div class="col-sm-2" style="max-width: 160px; display: inline-table;">
					<h:selectOneMenu value="#{productController.stars}" id="stars"
						styleClass="form-control" style="height: 34px;">
						<f:selectItem itemValue="1" itemLabel="1 star" />
						<f:selectItem itemValue="2" itemLabel="2 stars" />
						<f:selectItem itemValue="3" itemLabel="3 stars" />
						<f:selectItem itemValue="4" itemLabel="4 stars" />
						<f:selectItem itemValue="5" itemLabel="5 stars" />
					</h:selectOneMenu>
					<h:message for="stars" styleClass="label label-warning" />
				</div>
				<div class="col-sm-2" style="display:  inline;">
					<h:commandButton value="Submit"
						action="#{productController.addReview(productController.idProduct)}"
						styleClass="btn btn-success" />
				</div>
			</h:form>

		</h:panelGroup>
		
		<ui:include src="/WEB-INF/footer-js.xhtml" />
	</f:view>
</body>

</html>